<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Events</title>

<style>
body{
  margin:0;
  padding:14px;
  font-family:system-ui,-apple-system,"Noto Sans TC","Microsoft JhengHei",sans-serif;
}

/* 照片牆：高度縮短（約 50%），牆內捲動 */
.gallery{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:10px;
  height:50vh;          /* ← 你要的「再短一點」 */
  overflow:auto;        /* 牆內捲動，不露下方 */
  align-content:start;
}
.gallery img{
  width:100%;
  height:auto;
  display:block;
  cursor:zoom-in;
  background:#eee;
}
@media(max-width:900px){
  .gallery{grid-template-columns:repeat(2,1fr);}
}

/* 燈箱 */
.lightbox{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
.lightbox.on{display:flex}
.lightbox img{
  max-width:96vw;
  max-height:96vh;
  object-fit:contain;
  background:#111;
}
</style>
</head>

<body>

<div class="gallery" id="gallery"></div>

<div class="lightbox" id="lightbox">
  <img id="lightboxImg" alt="">
</div>

<script>
/* === 產生圖片（引擎）=== */
/* 只做一件事：把 img/ 裡「實際存在的 .jpg」全部放進來 */
const gallery = document.getElementById("gallery");
const lb = document.getElementById("lightbox");
const lbImg = document.getElementById("lightboxImg");

/* 依你的實際檔名數量調整即可；這裡給安全上限 */
for(let i=1;i<=500;i++){
  const num = String(i).padStart(3,"0");     // 001.jpg, 002.jpg...
  const src = `img/${num}.jpg`;

  const img = new Image();
  img.src = src;
  img.loading = "lazy";

  img.onerror = ()=> img.remove();           // 不存在就移除
  img.onclick = ()=>{ lbImg.src = src; lb.classList.add("on"); };

  gallery.appendChild(img);
}

/* 燈箱關閉 */
lb.onclick = ()=>{
  lb.classList.remove("on");
  lbImg.src="";
};
document.addEventListener("keydown", e=>{
  if(e.key==="Escape"){
    lb.classList.remove("on");
    lbImg.src="";
  }
});
</script>

</body>
</html>
